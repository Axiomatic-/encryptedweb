<!--
	Other Marvel rulesets:

		- Annihil.us.xml
		- Marvel_Store.xml


	Nonfunctional subdomains:

		- marvelkids	(redirects to http, valid cert)
		- shop			(redirects to http)


	Partially covered subdomains:

		- comicstore *
		- secure *
		- subscriptions *

	* Some pages redirect to http


	Fully covered subdomains:

		- (www.)


	Mixed content:

		- Images, on ^ from:

			- i.annihil.us *
			- x.annihil.us *

		- Ads on ^ from \d+.fls.doubleclick.net *

	* Secured by us

-->
<ruleset name="Marvel.com (partial)">

	<target host="marvel.com" />
	<target host="www.marvel.com" />
	<target host="comicstore.marvel.com" />
	<target host="subscriptions.marvel.com" />
	<target host="developer.marvel.com" />

	<!-- previous rule for reference
	<target host="secure.marvel.com" />
	<securecookie host="^\.marvel\.com$" name="^CMXSESSIONID$" />
	<exclusion pattern="^http://comicstore\.marvel\.com/(?!assets/)" />
	<exclusion pattern="^http://secure\.marvel\.com/(?:\?.*)?$" />
	<exclusion pattern="^http://subscriptions\.marvel\.com/(?!css/|i/|images/|(?:login|store/shippingr)\.asp|script/)" />
	<rule from="^http://((?:comicstore|secure|subscriptions|www)\.)?marvel\.com/"
		to="https://$1marvel.com/" />
	-->

	<exclusion pattern="^http://subscriptions\.marvel\.com/$" />
	<exclusion pattern="^http://subscriptions\.marvel\.com/(.*\.asp|store|fonts)" />

		<test url="http://subscriptions.marvel.com/" />
		<test url="http://subscriptions.marvel.com/Default.asp" />
		<test url="http://subscriptions.marvel.com/search.asp" />
		<test url="http://subscriptions.marvel.com/store/" />
		<test url="http://subscriptions.marvel.com/fonts/" />

	<!-- MCB issue -->
	<exclusion pattern="^http://marvel\.com/universe/" />

		<test url="http://marvel.com/universe/" />

	<!-- https would redirects to http and timeout, so exclude it -->
	<exclusion pattern="^http://marvel\.com/universe3zx/index\.php" />

		<test url="http://marvel.com/universe3zx/index.php" />

	<securecookie host="^marvel\.com$" name=".+" />

	<!-- follow server's behaviour -->
	<rule from="^http://www\.marvel\.com/"
		to="https://marvel.com/" />

		<test url="http://marvel.com/" />

	<rule from="^http:"
		to="https:" />

</ruleset>
