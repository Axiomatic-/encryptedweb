<!--
	CDN buckets:

		- s3.amazonaws.com/c.ooyala.com/
		- ak.c.ooyala.com.edgesuite.net


	Problematic subdomains:

		- ak.c.ooyala.com	(akamai)
		- player.ooyala.com
			Player JS correctly chooses secure player based on parent document
			protocol, but fails if parent document is HTTP and player is rewritten to
			HTTPS. Therefore, only enabled on mixedcontent platforms. See
			https://github.com/EFForg/https-everywhere/issues/1421 for example of breakage.

-->
<ruleset name="Ooyala (partial)" platform="mixedcontent">

	<target host="ooyala.com" />
	<target host="*.ooyala.com" />
		<!--
			https://trac.torproject.org/projects/tor/ticket/7615
							-->
		<exclusion pattern="crossdomain\.xml$" />


	<securecookie host="^(?:.*\.)?ooyala\.com$" name=".+" />


	<rule from="^http://ooyala\.com/"
		to="https://www.ooyala.com/" />

	<rule from="^http://(ak-c|backlot|cdn-api|extras|info|l|www)\.ooyala\.com/"
		to="https://$1.ooyala.com/" />

	<rule from="^http://(?:ak\.)?c\.ooyala\.com/"
		to="https://s3.amazonaws.com/c.ooyala.com/" />

</ruleset>
